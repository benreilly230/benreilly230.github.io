<html>
<head>
    <title> Ben Reilly MIS 3033</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Bootstrap icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Data table -->
    <link href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css" rel="stylesheet" />
    <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>

    <!-- Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <!-- Map -->
    <link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- sweetalert2 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.8.0/sweetalert2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.8.0/sweetalert2.all.min.js"></script>


    <link href="https://juxinglong.github.io/static/MIS3033.css" rel="stylesheet" />
</head>
<body style="margin:20px;">
    <script>
        "use strict";
        var rootPath = '@Url.Content("~/")'; //get the root path of the web app

        {
            let stu; // null, let
            stu =
            {
                id: "s123",
                name: "Ben Reilly",
                grade: 96.6, // , is optional on last one
            };

        }
    </script>

    <div class="m-bd-callout m-bd-callout-primary" style="width:400px;">

        <input id="id" />
        <button id="addbtn" class="btn btn-primary"> Add </button>
    </div>

    <script>
        {
            let addbtn = document.querySelector("#addbtn");
            addbtn.addEventListener("click", async () => {
                addstu();
            });

            async function addstu()
            { //function body
                //fetch
                let fd = new FormData();
                //fd.append("id", "S0000")
                fd.append("id", document.querySelector("#id").value);
                fd.append("dob", "6/29/1990");
                fd.append("name", "Ben Reilly");

                let r = await fetch(rootPath+"Home/AddStu", { body: fd, method: "post", cache: "no-store"});

                let rj = await r.json();

                console.log(rj);

                ShowTable();


                Swal.fire({
                    title: "Success",
                    text: "Student added successfully!",
                    icon: "success",
                });
            }

        }
    </script>



    If no name in the title 10% will be deducted

    <div id="table">
    </div>
    <script>
        "use strict";
        var grid = null; // table variable
        var g;

        async function ShowTable() {
            // fetch the data and show in table
            if (grid != null) {
                grid.destroy();
            }

            let table = document.querySelector("#table");
            /// add something here
            table.innerHTML = ""; // clean everything


            let r = await fetch(rootPath + "home/getstus", { cache: "no-store" });
            let rj = await r.json();

            g = rj;

            let params = {
                data: rj,
                pagination: { limit: 5, },
                search: true,
                sort: true,
                width: 600,
                columns: [{ id: "id", name: "Student ID" }, { id: "name", name: "Name" }, { id: "dob", name: "DOB" }]
            };

            grid = new gridjs.Grid(params)
            grid.render(table);


        } // end of function showtable

        ShowTable();
    </script>



</body>

</html>
